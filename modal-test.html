<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Modal Overlay Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
  header { padding: 20px; background: #0f172a; color: #fff; }
  main { padding: 24px; max-width: 900px; margin: 0 auto; }
  .content-block { height: 900px; background: #f8fafc; border: 1px solid #e5e7eb; border-radius: 12px; padding: 16px; }

  /* Trigger button */
  .search-tutorial-btn {
    display: inline-block; background: #0041C2; color: #fff; text-decoration: none;
    padding: 10px 16px; border-radius: 8px; font-weight: 600;
  }
  .search-tutorial-btn:hover { background: #002a85; }

  /* Overlay + modal */
  #searchOverlay[hidden], #searchModal[hidden] { display: none !important; }

  #searchOverlay {
    position: fixed; inset: 0;
    background: rgba(0,0,0,.45);            /* the dimming layer */
    z-index: 999; backdrop-filter: blur(1px);
  }
  #searchModal {
    position: fixed; left: 50%; top: 56px; transform: translateX(-50%);
    width: min(92vw, 820px); max-height: 80vh; overflow: auto;
    background: #fff; border: 1px solid #e5e7eb; border-radius: 16px;
    padding: 18px 18px 22px; box-shadow: 0 12px 28px rgba(0,0,0,.18);
    z-index: 1000; animation: fade .14s ease-out both, pop .16s ease-out both;
  }
  @keyframes fade { from { opacity: 0 } to { opacity: 1 } }
  @keyframes pop  { from { transform: translateX(-50%) translateY(-4px) scale(.98) } to { transform: translateX(-50%) translateY(0) scale(1) } }

  /* Modal content */
  .search-close {
    position: absolute; top: 8px; right: 10px; background: none; border: 0;
    font-size: 22px; line-height: 1; cursor: pointer; padding: 6px; border-radius: 8px;
  }
  .search-close:hover { background: rgba(2,6,23,.06); }
  h2 { margin: 0 0 10px; color: #0041C2; }

  .search-bar { display: flex; gap: 10px; margin-top: 6px; }
  .search-input {
    flex: 1; padding: 12px 14px; border: 1px solid #e5e7eb; border-radius: 10px; font-size: 16px;
  }
  .search-btn {
    padding: 12px 16px; background: #0041C2; color: #fff; border: none; border-radius: 10px; cursor: pointer; font-weight: 600;
  }
  .search-btn:hover { background: #002a85; }
  .results { margin-top: 14px; display: grid; gap: 12px; }
  .result { background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 14px 16px; }
</style>
</head>
<body>

<header>
  <a href="#" class="search-tutorial-btn" id="openSearch">Search Tutorial</a>
</header>

<main>
  <h1>Home Page</h1>
  <p>This is just filler content so you can see the page underneath the modal.</p>
  <div class="content-block">
    Scroll me. When the modal opens, background scroll is disabled and the page is dimmed.
  </div>
</main>

<!-- Overlay and empty modal -->
<div id="searchOverlay" hidden></div>
<div id="searchModal" hidden></div>

<script>
  const overlay = document.getElementById('searchOverlay');
  const modal   = document.getElementById('searchModal');
  const trigger = document.getElementById('openSearch');

  function openModal() {
    // Inject simple mock content; in your real app you’ll fetch search-wrapper.html instead
    modal.innerHTML = `
      <div class="search-wrapper" role="dialog" aria-modal="true" aria-labelledby="searchTitle">
        <button id="closeSearch" class="search-close" aria-label="Close search">×</button>
        <h2 id="searchTitle">Search the Tutorial</h2>
        <div class="search-bar">
          <input id="searchInput" class="search-input" type="search" placeholder="Type a keyword…" />
          <button id="searchBtn" class="search-btn">Search</button>
        </div>
        <div id="results" class="results" aria-live="polite"></div>
      </div>
    `;

    overlay.hidden = false;
    modal.hidden = false;
    document.body.style.overflow = 'hidden';   // prevent background scroll
    modal.querySelector('#searchInput')?.focus();

    // close handlers
    modal.querySelector('#closeSearch')?.addEventListener('click', closeModal);
    overlay.addEventListener('click', closeModal);
    window.addEventListener('keydown', escClose);
  }

  function closeModal() {
    overlay.hidden = true;
    modal.hidden = true;
    document.body.style.overflow = '';
    modal.innerHTML = '';
    window.removeEventListener('keydown', escClose);
  }

  function escClose(e) {
    if (e.key === 'Escape' && !modal.hidden) closeModal();
  }

  trigger.addEventListener('click', (e) => {
    e.preventDefault();
    openModal();
  });
</script>

</body>
</html>
